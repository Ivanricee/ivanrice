---
const navItems = [
  {
    title: 'Experiencia',
    url: '/ivanrice/#experience',
    ariaLabel: 'experience',
  },
  {
    title: 'Proyectos',
    url: '/ivanrice/#projects/?type=frontend',
    ariaLabel: 'projects/?type=frontend',
  },
  {
    title: 'Sobre Mi',
    url: '/ivanrice/#aboutme',
    ariaLabel: 'aboutme',
  },
]
---

<nav
  class={`w-full home-title flex justify-between items-center border-2 rounded-md
  text-ottoman-50 px-2 backdrop-blur-sm `}
>
  <button
    data-collapse-toggle="menu"
    type="button"
    class="text-american-blue-200 -md:my-1 -md:mr-2 hover:bg-american-blue-600/75 focus:ring-american-blue-400 relative z-20 inline-flex h-30 w-30 items-center justify-center rounded-lg p-2 text-lg focus:ring-2 focus:outline-none md:hidden"
    aria-controls="menu"
    aria-expanded="false"
  >
    <span class="sr-only">Abrir men√∫</span>
    <svg
      class="h-7 w-7"
      aria-hidden="true"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 17 14"
    >
      <path
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M1 1h15M1 7h15M1 13h15"></path>
    </svg>
  </button>
  <div
    class={`hidden md:block md:w-auto -md:absolute  -md:h-dvh -md:w-wvh  -md:-left-28 -md:-right-28 -md:-top-16 -md:bottom-20 -md:rounded-t-[2.7rem]
  -md:rounded-b-md -md:bg-american-blue-700/95 -md:backdrop-blur-md overflow-hidden`}
  >
    <ul
      class="-md:h-[30rem] flex h-20 w-full flex-col items-center justify-center rounded-3xl md:mt-0 md:flex-row md:border-0"
    >
      {
        navItems.map((itemNav) => {
          return (
            <li class="h-full w-full">
              <a
                href={itemNav.url}
                class="font-biryani -md:px-0 -md:py-7 -md:w-full -md:text-center -md:text-5xl relative inline-flex h-full items-center justify-center px-4 py-8 text-sm leading-none font-bold tracking-wider uppercase transition-all duration-500 ease-in-out hover:backdrop-blur-sm"
                aria-current="false"
                aria-label={itemNav.ariaLabel}
              >
                <span class="link-underline link-underline-black">{itemNav.title}</span>
              </a>
            </li>
          )
        })
      }
    </ul>
  </div>
</nav>
<style>
  @keyframes blurHead {
    from {
      opacity: 0;
      transform: scale(1);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  @keyframes scaleHead {
    from {
      transform: scale(1.5), translateX(-5rem);
    }
    to {
      transform: scale(0.5);
    }
  }
  .home-title::before {
    view-timeline-name: --headerBlur;
    view-timeline-axis: block;

    animation: blurHead linear both;
    animation-timeline: --headerBlur;
    animation-range: exit;
  }
  .home-title {
    view-timeline-name: --headerScale;
    view-timeline-axis: block;

    animation: blurSec linear both;
    animation-timeline: --headerScale;
    animation-range: exit;
  }
</style>
<script>
  import { menuRoutingObserver } from '@/scripts'

  document.addEventListener('astro:page-load', () => {
    //Observer
    const sections = document.querySelectorAll('.section-menu')
    const navItems = document.querySelectorAll('header nav ul li a')
    if (!sections || !navItems) throw new Error('section or anchor Element Not found.')
    menuRoutingObserver({ navItems, sections })
  })
</script>
